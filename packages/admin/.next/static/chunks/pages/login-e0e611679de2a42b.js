(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{7946:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(7978)}])},2653:function(e,s,t){"use strict";var n=t(418),r=t(3542);let i=r.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",o=n.Z.create({baseURL:i,timeout:3e4});o.interceptors.request.use(e=>{{let s=sessionStorage.getItem("admin_api_key");s&&(e.headers["x-admin-key"]=s)}return e}),o.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(sessionStorage.removeItem("admin_api_key"),window.location.href="/login"),Promise.reject(e)}),s.Z=o},7978:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var n=t(2322),r=t(2784),i=t(5632),o=t(2653),a=t(2202);function l(){let[e,s]=(0,r.useState)(""),[t,l]=(0,r.useState)(!1),u=(0,i.useRouter)(),d=async s=>{s.preventDefault(),l(!0);try{sessionStorage.setItem("admin_api_key",e),await o.Z.get("/admin/analytics"),a.ZP.success("Login successful"),u.push("/")}catch(e){var t,n;sessionStorage.removeItem("admin_api_key"),a.ZP.error((null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)||"Invalid API key")}finally{l(!1)}};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Admin Login"}),(0,n.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,n.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,n.jsx)("strong",{children:"Security Notice:"})," This uses an API key stored in session storage. Do not use on untrusted devices."]})}),(0,n.jsxs)("form",{onSubmit:d,children:[(0,n.jsxs)("label",{className:"block mb-4",children:[(0,n.jsx)("span",{className:"text-gray-700",children:"Admin API Key"}),(0,n.jsx)("input",{type:"password",value:e,onChange:e=>s(e.target.value),className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",placeholder:"Enter your admin API key",required:!0})]}),(0,n.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 disabled:bg-gray-400",children:t?"Verifying...":"Login"})]})]})})}}},function(e){e.O(0,[932,774,888,179],function(){return e(e.s=7946)}),_N_E=e.O()}]);