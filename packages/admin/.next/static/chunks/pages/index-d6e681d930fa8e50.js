(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3806)}])},2653:function(e,s,t){"use strict";var a=t(418),l=t(3542);let n=l.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",i=a.Z.create({baseURL:n,timeout:3e4});i.interceptors.request.use(e=>{{let s=sessionStorage.getItem("admin_api_key");s&&(e.headers["x-admin-key"]=s)}return e}),i.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(sessionStorage.removeItem("admin_api_key"),window.location.href="/login"),Promise.reject(e)}),s.Z=i},3806:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var a=t(2322),l=t(2784),n=t(5632),i=t(2653),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var c=(e,s)=>{let t=(0,l.forwardRef)(({color:t="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,children:c,...o},h)=>(0,l.createElement)("svg",{ref:h,...r,width:a,height:a,stroke:t,strokeWidth:i?24*Number(n)/Number(a):n,className:`lucide lucide-${d(e)}`,...o},[...s.map(([e,s])=>(0,l.createElement)(e,s)),...(Array.isArray(c)?c:[c])||[]]));return t.displayName=`${e}`,t};let o=c("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),h=c("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),x=c("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),u=c("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function m(){var e;let s=(0,n.useRouter)(),[t,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{{let e=sessionStorage.getItem("admin_api_key");if(!e){s.push("/login");return}}m()},[]);let m=async()=>{try{let e=await i.Z.get("/admin/analytics");r(e.data)}catch(e){console.error("Error fetching analytics:",e)}finally{c(!1)}};return d?(0,a.jsx)("div",{className:"p-8",children:"Loading..."}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("nav",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"CACeasy Admin Dashboard"})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Scans/Day"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.scans_per_day)||0})]}),(0,a.jsx)(o,{className:"text-blue-600",size:40})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Active Masons"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.active_masons)||0})]}),(0,a.jsx)(h,{className:"text-green-600",size:40})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Redemption Rate"}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[(100*((null==t?void 0:t.redemption_rate)||0)).toFixed(0),"%"]})]}),(0,a.jsx)(x,{className:"text-purple-600",size:40})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Pending Payouts"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.pending_payouts_count)||0})]}),(0,a.jsx)(u,{className:"text-yellow-600",size:40})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Top Regions"}),(0,a.jsx)("div",{className:"space-y-2",children:null==t?void 0:null===(e=t.top_regions)||void 0===e?void 0:e.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:e.region}),(0,a.jsxs)("span",{className:"font-semibold",children:[e.count," scans"]})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{onClick:()=>s.push("/flagged"),className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded",children:"View Flagged Events"}),(0,a.jsx)("button",{onClick:()=>s.push("/payouts"),className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded",children:"Manage Payouts"}),(0,a.jsx)("button",{onClick:()=>s.push("/batches"),className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded",children:"Batch Management"})]})]})]})]})]})}}},function(e){e.O(0,[932,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);